# AI SEO 자동 생성 가이드

## 0. 아무것도 실행하지 않은 경우 (기본 상태)

**SEO 버전만 생성하고 AI 자동 생성을 실행하지 않은 상태입니다.**

### 저장되는 데이터

| 필드 | 값 |
|------|-----|
| **path** | ✅ 사이트맵에서 복사됨 |
| **title** | ❌ `null` |
| **description** | ❌ `null` |
| **canonical** | ❌ `null` |
| **h1_selector** | ❌ `null` |
| **json_ld** | ❌ `null` |

### Workers 동작

```
null인 필드 → 원본 HTML 그대로 유지 (수정 안 함)
```

| 필드 | Workers 동작 |
|------|-------------|
| **title = null** | 원본 `<title>` 태그 유지 |
| **description = null** | 원본 `<meta description>` 유지 |
| **canonical = null** | ⚠️ 자동 수정 (`origin.` 제거, HTTPS 강제) |
| **h1_selector = null** | 변경 없음 |
| **json_ld = null** | 변경 없음 |

### 사용 시나리오

- 특정 페이지만 수동으로 SEO 설정하고 싶을 때
- 일부 페이지는 원본 유지, 일부만 수정하고 싶을 때
- 테스트 목적으로 버전만 생성할 때

---

## 모델 종류

| 모델 | API 키 필요 | 비용 | 품질 | 속도 |
|------|------------|------|------|------|
| **휴리스틱** | ❌ 불필요 | 무료 | ⭐⭐ | 빠름 |
| **OpenAI (GPT-4o-mini)** | ✅ 필요 | 유료 | ⭐⭐⭐⭐ | 보통 |
| **Claude (3.5 Sonnet)** | ✅ 필요 | 유료 | ⭐⭐⭐⭐⭐ | 보통 |

---

## 1. 휴리스틱 (Heuristic)

**AI 없이 규칙 기반으로 SEO 데이터를 추출합니다.**

### 동작 방식

| 필드 | 추출 방법 |
|------|----------|
| **Title** | 기존 `<h1>` 태그 → 없으면 기존 `<title>` 태그 → 60자 제한 |
| **Description** | 페이지 본문에서 첫 2개 문장 추출 → 160자 제한 |
| **Canonical** | 현재 URL에서 `id`, `no` 파라미터만 유지하여 정규화 |
| **H1 Selector** | `.post-title`, `#title`, `h1` 등 일반적인 제목 셀렉터 탐색 |
| **JSON-LD** | 기본 `WebPage` 스키마 생성 |

### 장점
- 무료, API 키 불필요
- 빠른 처리 속도
- Rate Limit 없음

### 단점
- 문맥을 이해하지 못함
- 단순 추출만 가능 (창의적 생성 불가)

---

## 2. OpenAI (GPT-4o-mini)

**GPT-4o-mini 모델로 SEO 메타데이터를 생성합니다.**

### 동작 방식

1. 페이지 HTML 크롤링
2. 텍스트 콘텐츠 추출 (최대 3,000자)
3. SEO 전문가 프롬프트와 함께 API 호출
4. JSON 형식 응답 파싱

### API 설정
```
Model: gpt-4o-mini
Temperature: 0.3 (일관성 높음)
```

### 장점
- 문맥 이해 기반 생성
- 자연스러운 제목/설명 생성
- 비용 효율적 (GPT-4 대비 저렴)

### 단점
- API 키 필요
- Rate Limit 존재 (429 에러 가능)
- 페이지당 약 0.5초 딜레이 필요

---

## 3. Claude (3.5 Sonnet)

**Anthropic Claude 3.5 Sonnet 모델로 SEO 메타데이터를 생성합니다.**

### 동작 방식

1. 페이지 HTML 크롤링
2. 텍스트 콘텐츠 추출 (최대 3,000자)
3. SEO 전문가 시스템 프롬프트 설정
4. JSON 형식 응답 파싱

### API 설정
```
Model: claude-3-5-sonnet-20241022
Max Tokens: 2048
```

### 장점
- 높은 품질의 SEO 콘텐츠
- 한국어 처리 우수
- 긴 컨텍스트 이해

### 단점
- API 키 필요
- OpenAI 대비 약간 비쌈

---

## 생성되는 필드

### Title (제목)
- 60자 이내
- 페이지 핵심 키워드 포함
- 브랜드명 포함 권장

### Description (설명)
- 160자 이내
- 행동 유도 문구 포함
- 주요 키워드 자연스럽게 포함

### Canonical URL
- 중복 콘텐츠 방지
- 핵심 파라미터만 유지 (`id`, `no`)
- 불필요한 파라미터 제거 (`page`, `sort` 등)

### H1 Selector
- CSS 셀렉터 형식
- 예: `.post-title`, `#main-heading`, `h1`
- Workers에서 해당 요소를 `<h1>`으로 변환

### JSON-LD (구조화 데이터)
- Schema.org 형식
- `WebPage` 또는 `FAQPage` 타입
- 검색 결과 리치 스니펫 활성화

---

## 인코딩 지원

자동으로 페이지 인코딩을 감지합니다:

- ✅ UTF-8
- ✅ EUC-KR (한국어 레거시)
- ✅ Shift_JIS (일본어)
- ✅ GB2312, GBK (중국어)

---

## 권장 사용 방법

### 방법 1: 완전 자동화
```
사이트맵 크롤링 → SEO 버전 생성 → AI 자동 생성 (휴리스틱) → 검토 → 활성화
```

### 방법 2: 수동 관리
```
사이트맵 크롤링 → SEO 버전 생성 → 수동으로 각 페이지 편집 → 활성화
```

### 방법 3: 하이브리드
```
SEO 버전 생성 → 휴리스틱으로 기본 생성 → 중요 페이지만 AI로 재생성 → 검토 → 활성화
```

### 워크플로우 다이어그램

```
┌─────────────────┐
│ 사이트맵 크롤링  │
└────────┬────────┘
         ▼
┌─────────────────┐
│  SEO 버전 생성   │  ← 모든 필드 null (원본 유지)
└────────┬────────┘
         ▼
   ┌─────┴─────┐
   ▼           ▼
┌──────┐  ┌────────┐
│ 수동  │  │AI 생성 │
│ 편집  │  │(선택)  │
└──┬───┘  └───┬────┘
   │          │
   └────┬─────┘
        ▼
┌─────────────────┐
│    검토하기     │  ← 페이지별 확인 및 수정
└────────┬────────┘
         ▼
┌─────────────────┐
│  버전 활성화    │  ← Workers에 적용됨
└─────────────────┘
```

